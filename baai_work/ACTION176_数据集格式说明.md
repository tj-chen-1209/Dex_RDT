# action176 数据集格式与属性详细说明

## 📁 总体结构

```
action176/
├── episode_0/
├── episode_1/
├── ...
└── episode_99/
```

**总计:** 100 个 episodes  
**数据集总大小:** ~15.3 GB

---

## 📂 单个 Episode 结构

每个 episode 目录包含：

```
episode_N/
├── camera_head/              # 头部相机图像序列 (452张)
│   ├── frame_000004.jpg
│   ├── frame_000005.jpg
│   └── ...
├── camera_left_wrist/        # 左手腕相机 (452张)
├── camera_right_wrist/       # 右手腕相机 (452张)
├── camera_third_view/        # 第三视角相机 (452张)
├── episode_0.bson           # 机器人状态观测和动作数据 (~604KB)
└── xhand_control_data.bson  # 灵巧手控制数据 (~289KB)
```

**单个 episode 数据量:** ~153 MB  
**总帧数:** 452 帧  
**时长:** ~22.75 秒  
**采样频率:** ~19.82 Hz (约 50ms/帧)

---

## 🖼️ 图像数据详细说明

### 基本属性
- **格式:** JPEG
- **分辨率:** 640 × 480 像素
- **颜色模式:** RGB
- **数据类型:** uint8 [0-255]
- **平均文件大小:** ~84 KB/张
- **通道数:** 3 (R, G, B)

### 相机视角
1. **camera_head** - 头部相机（机器人视角）
2. **camera_left_wrist** - 左手腕相机（左臂视角）
3. **camera_right_wrist** - 右手腕相机（右臂视角）
4. **camera_third_view** - 第三视角相机（外部观察）

### 帧序列
- **帧编号:** frame_000004.jpg 到 frame_000455.jpg
- **序列完整性:** ✓ 连续无缺失
- **同步性:** ✓ 4个相机完全同步，帧数一致

### 像素统计（示例）
```
R 通道: 均值=103-109, 标准差=65-68
G 通道: 均值=104-111, 标准差=64-67
B 通道: 均值=102-111, 标准差=64-66
```

---

## 📊 episode_0.bson 数据结构

### 文件元信息
```json
{
  "id": "唯一UUID标识符",
  "timestamp": 1734076528859,  // Unix时间戳(毫秒)
  "metadata": {
    "driver_version": "1.0.0",
    "operator": "manual",
    "station_id": "工作站UUID",
    "task": "example",
    "topics": { /* 数据主题配置 */ },
    "version": "1.2.2"
  }
}
```

### 数据主题 (data)

包含 10 个主题的时间序列数据，每个主题有 452 个数据点：

#### 1. 机械臂位姿 (Pose)
- `/observation/left_arm/pose` - 左臂末端位姿
- `/observation/right_arm/pose` - 右臂末端位姿

**数据格式:**
```python
{
  "t": 1760526694164,  # 时间戳(毫秒)
  "data": {
    "t": [x, y, z],           # 位置 (3维)
    "r": [qx, qy, qz, qw]     # 旋转四元数 (4维)
  }
}
```

#### 2. 关节状态 (Joint State)
- `/observation/left_arm/joint_state` - 左臂关节观测
- `/observation/right_arm/joint_state` - 右臂关节观测
- `/action/left_arm/joint_state` - 左臂关节动作指令
- `/action/right_arm/joint_state` - 右臂关节动作指令
- `/observation/head/joint_state` - 头部关节观测 (2维)
- `/action/head/joint_state` - 头部关节动作 (2维)
- `/observation/spine/joint_state` - 腰部关节观测 (1维)
- `/action/spine/joint_state` - 腰部关节动作 (1维)

**数据格式:**
```python
{
  "t": 1760526694164,  # 时间戳(毫秒)
  "data": {
    "pos": [j1, j2, j3, j4, j5, j6],  # 关节位置 (6维，双臂)
    "vel": [v1, v2, v3, v4, v5, v6],  # 关节速度 (可为None)
    "eff": [e1, e2, e3, e4, e5, e6]   # 关节力矩 (可为None)
  }
}
```

### 时间序列特性
- **采样频率:** ~19.82 Hz
- **平均时间间隔:** 50.47 ms
- **总时长:** 22.76 秒
- **数据点数:** 452 个

---

## 🤚 xhand_control_data.bson 数据结构

### 整体结构
```python
{
  "frames": [  # 452 帧
    {
      "t": 0.200084,  # 时间戳(秒)
      "action": {
        "left_hand": [12维向量],
        "right_hand": [12维向量]
      },
      "observation": {
        "left_hand": [12维向量],
        "right_hand": [12维向量]
      }
    },
    ...
  ]
}
```

### 数据维度
- **每只手:** 12 维控制/观测向量
- **总帧数:** 452 帧
- **采样频率:** ~19.87 Hz
- **时长:** 22.75 秒

### 左手动作数据统计 (action.left_hand, 12维)
```
维度  0: [  0.0212,   0.6435], 均值=  0.4115, 标准差= 0.1679
维度  1: [  1.2336,   1.5094], 均值=  1.4246, 标准差= 0.0775
维度  2: [  0.0000,   0.0170], 均值=  0.0016, 标准差= 0.0028
维度  3: [  0.0108,   0.1043], 均值=  0.0389, 标准差= 0.0163
维度  4: [  0.0000,   0.5782], 均值=  0.1494, 标准差= 0.1225
维度  5: [  0.0000,   0.0393], 均值=  0.0053, 标准差= 0.0069
维度  6: [  0.0000,   0.0294], 均值=  0.0023, 标准差= 0.0052
维度  7: [  0.0000,   0.0073], 均值=  0.0004, 标准差= 0.0010
维度  8: [  0.0000,   0.0656], 均值=  0.0011, 标准差= 0.0065
维度  9: [  0.0000,   0.0120], 均值=  0.0001, 标准差= 0.0011
维度 10: [  0.0000,   0.0307], 均值=  0.0002, 标准差= 0.0019
维度 11: [  0.0000,   0.2254], 均值=  0.0069, 标准差= 0.0317
```

### 右手动作数据统计 (action.right_hand, 12维)
```
维度  0: [  0.0000,   1.3203], 均值=  0.7761, 标准差= 0.4147
维度  1: [  0.6834,   1.5710], 均值=  1.2308, 标准差= 0.1902
维度  2: [  0.0000,   1.1559], 均值=  0.0531, 标准差= 0.1482
维度  3: [  0.0000,   0.1350], 均值=  0.0070, 标准差= 0.0217
维度  4: [  0.0000,   1.2681], 均值=  0.2897, 标准差= 0.3751
维度  5: [  0.0000,   1.6661], 均值=  0.3792, 标准差= 0.5364
维度  6: [  0.0000,   1.1368], 均值=  0.3359, 标准差= 0.4474
维度  7: [  0.0000,   1.9410], 均值=  0.4765, 标准差= 0.6733
维度  8: [  0.0000,   1.0573], 均值=  0.3149, 标准差= 0.4201
维度  9: [  0.0000,   1.9210], 均值=  0.5151, 标准差= 0.7126
维度 10: [  0.0000,   1.1663], 均值=  0.2238, 标准差= 0.3261
维度 11: [  0.0000,   1.9210], 均值=  0.6392, 标准差= 0.8098
```

### 左手观测数据统计 (observation.left_hand, 12维)
```
维度  0: [    2.17,    37.23], 均值=   24.34, 标准差=   9.41
维度  1: [   71.55,    85.04], 均值=   81.43, 标准差=   4.05
维度  2: [   -1.08,     6.41], 均值=   -0.23, 标准差=   0.35
维度  3: [   -0.57,     5.79], 均值=    2.14, 标准差=   0.90
维度  4: [    0.42,    32.48], 均值=    8.88, 标准差=   6.02
维度  5: [   -3.00,    33.57], 均值=    1.03, 标准差=   1.63
维度  6: [   -0.17,     2.33], 均值=    1.14, 标准差=   0.34
维度  7: [   -0.42,     1.25], 均值=   -0.01, 标准差=   0.12
维度  8: [    0.42,     4.16], 均值=    0.93, 标准差=   0.35
维度  9: [   -1.25,     0.58], 均值=   -0.06, 标准差=   0.35
维度 10: [    0.58,     1.58], 均值=    0.79, 标准差=   0.14
维度 11: [   -0.75,    13.83], 均值=    0.71, 标准差=   1.89
```

### 右手观测数据统计 (observation.right_hand, 12维)
```
维度  0: [   13.83,    73.00], 均值=   46.64, 标准差=  17.56
维度  1: [   36.08,    84.33], 均值=   64.49, 标准差=  13.47
维度  2: [    0.50,    24.58], 均值=    3.06, 标准差=   5.43
维度  3: [   -0.66,     7.68], 均值=    0.41, 标准差=   1.23
维度  4: [   -1.50,    57.66], 均值=   16.14, 标准差=  19.69
维度  5: [   -2.00,    94.41], 均值=   21.67, 标准差=  28.87
维度  6: [   -1.00,    54.00], 均值=   17.82, 标准差=  22.36
维度  7: [   -4.50,   110.33], 均值=   26.02, 标准差=  35.44
维度  8: [   -1.25,    55.75], 均值=   17.89, 标准差=  22.81
维度  9: [   -3.75,   112.41], 均值=   28.58, 标准差=  39.59
维度 10: [    0.50,    56.25], 均值=   12.94, 标准差=  17.11
维度 11: [   -3.92,   111.33], 均值=   35.71, 标准差=  45.18
```

**注意:** observation 数据的数值范围明显大于 action，可能表示观测数据使用了不同的单位或归一化方式。

---

## 🔄 数据同步性

### 完美同步
- ✅ 4个相机图像数量完全一致 (452张)
- ✅ 灵巧手控制数据: 452帧
- ✅ 机器人关节数据: 452个时间点
- ✅ 采样频率一致: ~19.8 Hz

### 时间对齐
- 所有数据流都带有精确时间戳
- episode_0.bson: 毫秒级Unix时间戳
- xhand_control_data.bson: 秒级相对时间戳
- 可通过时间戳进行精确对齐

---

## 💾 数据量统计

### 单个 Episode
```
图像数据:     4 × 452 × 84KB ≈ 152 MB
BSON数据:     0.60 + 0.29 MB ≈ 0.89 MB
总计:         约 153 MB
```

### 整个数据集 (100 episodes)
```
图像数据:     100 × 152 MB ≈ 15.2 GB
BSON数据:     100 × 0.89 MB ≈ 89 MB
总计:         约 15.3 GB
总帧数:       100 × 452 = 45,200 帧
总图像:       100 × 1,808 = 180,800 张
```

---

## 🎯 数据用途

### 机器人学习任务
1. **视觉-运动学习**
   - 4个视角的RGB图像作为观测输入
   - 机械臂和灵巧手的精确控制信号

2. **模仿学习 (Imitation Learning)**
   - 完整的状态-动作对 (observation-action pairs)
   - 多模态数据：视觉 + 本体感受

3. **强化学习 (Reinforcement Learning)**
   - 专家演示数据用于预训练
   - 多视角观测提供丰富的状态信息

4. **灵巧操作 (Dexterous Manipulation)**
   - 12维灵巧手控制数据
   - 双臂协调操作数据

### 数据特点
- ✅ 高频采样 (~20 Hz)
- ✅ 多模态数据 (视觉 + 关节 + 灵巧手)
- ✅ 双臂协调
- ✅ 时间同步精确
- ✅ 数据质量高，序列完整

---

## 📖 读取示例代码

### 读取图像
```python
from PIL import Image
import numpy as np

img_path = "episode_0/camera_head/frame_000100.jpg"
img = Image.open(img_path)
img_array = np.array(img)  # shape: (480, 640, 3)
```

### 读取 BSON 数据
```python
import bson

# 读取机器人状态数据
with open("episode_0/episode_0.bson", 'rb') as f:
    episode_data = bson.decode_all(f.read())[0]
    
left_arm_joints = episode_data['data']['/observation/left_arm/joint_state']
# 每个元素: {'t': timestamp, 'data': {'pos': [...], 'vel': [...], 'eff': [...]}}

# 读取灵巧手控制数据
with open("episode_0/xhand_control_data.bson", 'rb') as f:
    hand_data = bson.decode_all(f.read())[0]
    
frames = hand_data['frames']  # 452 帧
# 每帧: {'t': timestamp, 'action': {...}, 'observation': {...}}
```

---

## 📝 备注

1. **坐标系:** 需要查阅原始文档确认坐标系定义
2. **单位:** 
   - 位置可能是米(m)
   - 角度可能是弧度(rad)
   - 力矩可能是牛顿米(Nm)
3. **灵巧手12维:** 具体对应哪些关节需要参考硬件文档
4. **备份文件:** 目录中包含 `.backup` 文件，应使用非备份版本

---

生成时间: 2025-11-26  
分析工具: Python + bson + numpy + PIL

